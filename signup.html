<html>

<head>
    <title>Sign Up</title>
</head>
<style>
    body {
        display: flex;
        justify-content: center;
        align-items: center;    
        height: 100vh;           
        font-family: Playfair Display, sans-serif;
        background-color: #27f5e4;
		background-image: url('');			
		background-size: cover;
		background-position: center;
    }

    .signup-container {
        text-align: center;
        background: white;
        padding: 30px;
        border-radius: 8px;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
    }

    input {
        display: block;
        width: 250px;
        margin: 10px auto;
        padding: 10px;
        border-radius: 4px;
        border: 1px solid #000000;
    }

    button {
        padding: 10px 20px;
        border-radius: 4px;
        border: none;
        background-color: #007bff;
        color: white;
        cursor: pointer;
    }

    button:hover {
        background-color: #0056b3;
    }

    

    #color-container {
	    display:none;
	    margin-top: 20px;
    }

    #message {
	    color:red;
	    margin-top: 10px;
    }

	header {
		opacity: 0.6;
		
	}

</style>
<body>
    <div class ="signup-container">
	   <h2>Sign Up  <br> Enter a Username and Password </h2> 
        <input type="text" id="firstName" placeholder="First Name">
        <input type="text" id="lastName" placeholder="Last Name">
        <input type="text" id="login" placeholder="Username">
        <input type="password" id="password" placeholder="Password">
        <button onclick="login()">Sign Up</button>
		<header><strong>Already have an account?</strong></header>
		<button onclick="signin()">Sign In</button>
    </div>

    <script>
	let userId = "";
function login() {
    const loginValue = document.getElementById("login").value;
    const passwordValue = document.getElementById("password").value;

    // Clear previous message
    document.getElementById("message").textContent = "";

    fetch("LAMPAPI/Register.php", {
        method: "POST",
        headers: {
            "Content-Type": "application/json"
        },
        body: JSON.stringify({ 
            firstName: firstName, 
            lastName: lastName,
            login: loginValue, 
            password: passwordValue, 
        })
    })
    .then(response => response.json())
    .then(data => {
        if (data.error === "") {
            // Login successful
		    userId = data.userId;
            document.getElementById("message").textContent = "Welcome, redirecting to contacts";
			// Redirect to contact.html after a short delay
			setTimeout(() => {
				window.location.href = "contacts.html";
			}, 2000);
	} else {
            // Login failed
            document.getElementById("message").textContent = "Incorrect username or password. " + data.error;
        }
    })
    .catch(err => {
        console.error("Error:", err);
        document.getElementById("message").textContent = "Server error. Please try again.";
    });
}

function signin() {
	window.location.href = "index.html";
}

</script>
</body>
</html>
